defpackage ao-eval :
   import core
   import math
   import collections
   import reader
   import geom
   import eval
   import ao
   import glu
   import font
   import eval-ao-repl

public defn eval-ao (s:String, ao-env:Frame) -> Geom :
  val forms = read-all(s)
  ;; println-all(["FORMS: " forms])
  val es = unwrap-all(parse(forms))
  ;; println-all(["EXP: "   es])
  val e  = eval-begin(List(ao-env), es)
  ;; println-all(["G: " e])
  match(e) :
    (g:Geom) : jit(g)
    (o) :      Msg(to-string(o))

